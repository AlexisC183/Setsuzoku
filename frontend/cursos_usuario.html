<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Cursos - Setsuzoku</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .barra-superior {
            background-color: #2c3e50;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .contenedor-principal {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .barra-lateral {
            width: 250px;
            background-color: #34495e;
            color: white;
            height: 100%;
            overflow-y: auto;
            position: relative;
            z-index: 100;
        }

        .boton-menu {
            position: absolute;
            top: 10px;
            right: -40px;
            background-color: #34495e;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            padding: 10px;
            cursor: pointer;
            z-index: 101;
        }

        .menu-usuario {
            padding: 20px;
            border-bottom: 1px solid #2c3e50;
        }

        .nombre-usuario {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .rol-usuario {
            font-size: 0.9rem;
            color: #bdc3c7;
        }

        .menu-opciones {
            list-style: none;
            padding: 0;
        }

        .menu-opciones li {
            border-bottom: 1px solid #2c3e50;
        }

        .menu-opciones a {
            display: block;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            transition: background-color 0.2s;
        }

        .menu-opciones a:hover {
            background-color: #2c3e50;
        }

        .menu-opciones a.disabled {
            color: #7f8c8d;
            cursor: not-allowed;
        }

        .menu-opciones a.disabled:hover {
            background-color: transparent;
        }

        .contenido-cursos {
            flex: 1;
            padding: 30px;
            background-color: white;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .titulo-cursos {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .lista-cursos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .curso-item {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .curso-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .curso-imagen {
            width: 100%;
            height: 180px;
            background-color: #ddd;
            background-image: url('https://picsum.photos/seed/curso/400/180.jpg');
            background-size: cover;
            background-position: center;
        }

        .curso-contenido {
            padding: 20px;
        }

        .curso-titulo {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .curso-instructor {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .curso-progreso {
            margin-bottom: 15px;
        }

        .barra-progreso {
            height: 8px;
            background-color: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .progreso-actual {
            height: 100%;
            background-color: #3498db;
        }

        .curso-estado {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .estado-en-curso {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .estado-completado {
            background-color: #d4edda;
            color: #155724;
        }

        .curso-boton {
            display: inline-block;
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }

        .curso-boton:hover {
            background-color: #2980b9;
        }

        .mensaje-vacio {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .boton-explorar {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #27ae60;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 1rem;
            transition: background-color 0.2s;
        }

        .boton-explorar:hover {
            background-color: #229954;
        }
    </style>
</head>
<body>
    <!-- BARRA SUPERIOR -->
    <nav class="barra-superior">
        <a href="index.html" class="logo">Setsuzoku</a>
    </nav>

    <div class="contenedor-principal">
        <!-- BARRA LATERAL -->
        <div class="barra-lateral">
            <button class="boton-menu" id="boton-menu">☰</button>
            
            <div class="menu-usuario">
                <div class="nombre-usuario" id="nombre-usuario">Usuario</div>
                <div class="rol-usuario" id="rol-usuario">Rol</div>
            </div>
            
            <ul class="menu-opciones">
                <li><a href="perfil.html">Perfil</a></li>
                <li><a href="index.html">Menú principal</a></li>
                <li><a href="postulaciones.html" id="enlace-postulaciones">Tus postulaciones</a></li>
                <li><a href="cursos_usuario.html" id="enlace-cursos-usuario">Tus cursos</a></li>
                <li><a href="trabajos.html" id="enlace-trabajos">Trabajos</a></li>
                <li><a href="cursos.html" id="enlace-cursos">Cursos</a></li>
                <li><a href="#" id="cerrar-sesion">Cerrar sesión</a></li>
            </ul>
        </div>

        <!-- CONTENIDO DE CURSOS -->
        <div class="contenido-cursos">
            <h1 class="titulo-cursos">Mis Cursos</h1>
            
            <div id="contenedor-cursos">
                <!-- Los cursos se cargarán aquí con JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Función para cargar los datos del usuario
        function cargarDatosUsuario() {
            const usuario = JSON.parse(localStorage.getItem('usuario'));
            
            if (usuario) {
                // Mostrar información del usuario en la barra lateral
                document.getElementById('nombre-usuario').textContent = usuario.nombre;
                document.getElementById('rol-usuario').textContent = 
                    usuario.grupo.charAt(0).toUpperCase() + usuario.grupo.slice(1);
                
                // Configurar opciones según el rol
                configurarMenuSegunRol(usuario.grupo);
                
                // Cargar cursos del usuario
                cargarCursosUsuario(usuario.id);
            } else {
                // Si no hay sesión, redirigir al inicio
                window.location.href = 'index.html';
            }
        }

        // Configurar el menú según el rol del usuario
        function configurarMenuSegunRol(rol) {
            // Por defecto, todos los enlaces están habilitados
            const enlaces = {
                'postulaciones': false,
                'cursos-usuario': false,
                'trabajos': false,
                'cursos': false
            };
            
            // Configurar según el rol
            switch(rol) {
                case 'candidato':
                    // Los candidatos pueden ver todo excepto "Trabajos" (publicar ofertas)
                    enlaces['trabajos'] = true;
                    break;
                case 'reclutador':
                    // Los reclutadores pueden ver todo excepto "Tus cursos"
                    enlaces['cursos-usuario'] = true;
                    break;
                case 'instructor':
                    // Los instructores pueden ver todo excepto "Tus postulaciones"
                    enlaces['postulaciones'] = true;
                    break;
            }
            
            // Aplicar la configuración
            for (const [enlace, deshabilitar] of Object.entries(enlaces)) {
                const elemento = document.getElementById(`enlace-${enlace}`);
                if (deshabilitar) {
                    elemento.classList.add('disabled');
                    elemento.setAttribute('href', '#');
                }
            }
        }

        // Función para cargar los cursos del usuario
        function cargarCursosUsuario(usuarioId) {
            const contenedorCursos = document.getElementById('contenedor-cursos');
            
            // Simulación de datos de cursos del usuario
            // En una aplicación real, estos datos vendrían de una API o base de datos
            const cursosUsuarioSimulados = [
                {
                    id: 1,
                    titulo: "Desarrollo Web con JavaScript",
                    instructor: "Carlos Rodríguez",
                    progreso: 75,
                    estado: "en-curso",
                    imagen: "javascript"
                },
                {
                    id: 2,
                    titulo: "Diseño UX/UI Fundamental",
                    instructor: "Ana Martínez",
                    progreso: 100,
                    estado: "completado",
                    imagen: "uxui"
                },
                {
                    id: 3,
                    titulo: "Python para Ciencia de Datos",
                    instructor: "Miguel Ángel López",
                    progreso: 30,
                    estado: "en-curso",
                    imagen: "python"
                }
            ];
            
            // Verificar si hay cursos
            if (cursosUsuarioSimulados.length === 0) {
                contenedorCursos.innerHTML = `
                    <div class="mensaje-vacio">
                        <p>Aún no estás inscrito en ningún curso.</p>
                        <a href="cursos.html" class="boton-explorar">Explorar cursos disponibles</a>
                    </div>
                `;
                return;
            }
            
            // Crear lista de cursos
            const listaCursos = document.createElement('div');
            listaCursos.className = 'lista-cursos';
            
            // Agregar cada curso a la lista
            cursosUsuarioSimulados.forEach(curso => {
                const itemCurso = document.createElement('div');
                itemCurso.className = 'curso-item';
                
                // Determinar clase CSS según el estado
                let claseEstado = '';
                let textoEstado = '';
                switch(curso.estado) {
                    case 'en-curso':
                        claseEstado = 'estado-en-curso';
                        textoEstado = 'En curso';
                        break;
                    case 'completado':
                        claseEstado = 'estado-completado';
                        textoEstado = 'Completado';
                        break;
                }
                
                // Construir HTML del item
                itemCurso.innerHTML = `
                    <div class="curso-imagen" style="background-image: url('https://picsum.photos/seed/${curso.imagen}/400/180.jpg')"></div>
                    <div class="curso-contenido">
                        <h3 class="curso-titulo">${curso.titulo}</h3>
                        <p class="curso-instructor">Instructor: ${curso.instructor}</p>
                        <div class="curso-progreso">
                            <div class="barra-progreso">
                                <div class="progreso-actual" style="width: ${curso.progreso}%"></div>
                            </div>
                        </div>
                        <span class="curso-estado ${claseEstado}">${textoEstado}</span>
                        <a href="#" class="curso-boton">Ver curso</a>
                    </div>
                `;
                
                listaCursos.appendChild(itemCurso);
            });
            
            // Agregar lista al contenedor
            contenedorCursos.appendChild(listaCursos);
        }

        // Función para cerrar sesión
        function cerrarSesion() {
            localStorage.removeItem('usuario');
            window.location.href = 'index.html';
        }

        // Función para alternar la barra lateral
        function toggleBarraLateral() {
            const barraLateral = document.querySelector('.barra-lateral');
            barraLateral.classList.toggle('abierta');
        }

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar datos del usuario
            cargarDatosUsuario();
            
            // Configurar evento para el botón de menú
            document.getElementById('boton-menu').addEventListener('click', toggleBarraLateral);
            
            // Configurar evento para cerrar sesión
            document.getElementById('cerrar-sesion').addEventListener('click', function(e) {
                e.preventDefault();
                cerrarSesion();
            });
        });
    </script>
</body>
</html>